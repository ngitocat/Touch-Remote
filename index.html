<!DOCTYPE html><!--HTML5-->
<html>
  <head>    
    <meta charset="utf-8"><!--Unicode-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><!--Mobile First-->
    <title>Touch Remote</title>    
    <script src="foreground.js" defer></script>
    <link rel="manifest" href="manifest.json">
  </head>
  <body>
    <h1>Welcom To Touch Remote Application Configuration</h1>
    <p>Swipe down to start up!</p>
  <script>
      window.addEventListener('DOMContentLoaded', () => {  
        let open_link = link => {
          try {
            let url = new URL(link);
            window.open(`${link}/#remote`);
          } catch (_) {
            ask_ip(`"${link}" is not a valid URL! Enter address ip and port of kodi`);
         }
        }
        
        let ask_ip = (message = "Enter your address IP of kodi here! Example IP : 192.168.1.11", defaultValue = "192.168.1.11") => {
          let ip = prompt(message, defaultValue);
          (ip === null) || (ip === ``) || ip.includes("Example") ? ask_ip(`Your IP is not a valid Address! Please enter address ip of kodi, example ip 192.168.1.11`, defaultValue)
            : ask_port(ip);            
          console.log(ip);
        }
        
        let ask_port = (address, message = "Enter your PORT of kodi here! Example Port : 8181", defaultValue = "8181") => {
          let port = prompt(message, defaultValue);
          (port === null) || (port === ``) || port.includes("Example") || isNaN(port) ? ask_port(address, `Your PORT is not a number! Please enter your PORT of kodi, example port 8181`, defaultValue) : open_link(`http://${address}:${port}`);
          console.log(`http://${address}:${port}`);          
        }
        
        ask_ip();
      });
  </script> 
  </body>
</html>
