<!DOCTYPE html><!--HTML5-->
<html>
  <head>    
    <meta charset="utf-8"><!--Unicode-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><!--Mobile First-->
    <title>Touch Remote</title>    
    <script src="foreground.js" defer></script>
    <link rel="manifest" href="manifest.json">
  </head>
  <body>
    <h1>Welcom To Touch Remote Application Configuration</h1>
    <p>Swipe down to start up!</p>
  <script>
      window.addEventListener('DOMContentLoaded', () => {  
        let ask_user_input = (message, defaultValue = "http://192.168.1.11:8181") => {
          let uri = prompt(message , defaultValue);
          uri === null ? ask_user_input("Please, do not cancel! Enter address ip of kodi and port required is 8181", defaultValue)
            : uri === "" ? ask_user_input("Emty url! Please enter address ip of kodi and port required is 8181", defaultValue)
            : open_link(uri);
        }      
        
        let open_link = link => {
          try {
            let url = new URL(link);
            url.port === "8181" ? window.open(`${link}/#remote`) : ask_user_input(`"${url.port}" is not a valid port`);
          } catch (_) {
            ask_user_input(`"${link}" is not a valid URL`);
         }
        }
        
        ask_user_input(`Enter address ip of kodi here and port required is 8181! "http://<your-ip>:8181"`);
      });
  </script> 
  </body>
</html>
